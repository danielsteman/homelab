# Prometheus configuration file

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: "homelab"
    environment: "production"

# Scrape configurations
scrape_configs:
  # Prometheus itself
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]

  # Node Exporter on Proxmox host
  # If running on same host, use localhost. Otherwise use Proxmox host IP
  - job_name: "node-exporter"
    static_configs:
      - targets: ["localhost:9100"]
        labels:
          instance: "proxmox-host"

  # PVE Exporter - Proxmox VE specific metrics (VMs, storage, cluster)
  # Official exporter: https://github.com/prometheus-pve/prometheus-pve-exporter
  - job_name: "pve-exporter"
    static_configs:
      - targets: ["pve-exporter:9221"]
        labels:
          instance: "proxmox-host"
    metrics_path: /pve
    params:
      module: [default]
      cluster: ["1"] # Enable cluster metrics
      node: ["1"] # Enable node metrics
